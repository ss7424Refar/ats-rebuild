<!--==== JS ====-->
<!-- jQuery 3 -->
<script src="__PUBLIC_JS__/jquery/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="__PUBLIC_JS__/bootstrap/bootstrap.min.js"></script>


<!--PACE-->
<!--有点卡，暂时不用-->
<!--<script src="__PUBLIC_JS__/pace/pace.js"></script>-->
<!--    toastr-->
<script src="__PUBLIC_JS__/toastr/toastr.min.js"></script>

<script>

    // toastr
    toastr.options.positionClass = 'toast-top-center';
    toastr.options.closeButton = true;
    // css
    // toastr.options.positionClass = 'toast-center-center';
    toastr.options.timeOut = 2800; // How long the toast will display without user interaction
    toastr.options.extendedTimeOut = 2000; // How long the toast will display after a user hovers over it
    // toastr.options.progressBar = true;
</script>

<!-- AdminLTE App -->
<!--/! AdminLTE app.js-->
<!-- ================-->
<!-- Main JS application file for AdminLTE v2. This file-->
<!-- should be included in all pages. It controls some layout-->
<!-- options and implements exclusive AdminLTE plugins.-->
<!-- /-->
<script src="__PUBLIC_JS__/adminlte/adminlte.min.js"></script>
<!--moment.js-->
<script src="__PUBLIC_JS__/moment/moment.min.js"></script>
<!--common-->
<script src="__PUBLIC_JS__/assets/common.js?version=1.4.0.6"></script>
<!--eggShell-->
<script src="__PUBLIC_JS__/assets/eggShell.js"></script>
<script src="__PUBLIC_JS__/assets/mouseEffect.js"></script>

<script>
    // 公用的js, 但是要传入模板变量渲染, 貌似只能放在这里写了。
    $(function () {
        onlineSession();
    });

    // session counter
    function onlineSession() {
        if ("WebSocket" in window) {
            // 打开一个 web socket
            var ws = new WebSocket("{$pushSocketUrl}");

            ws.onmessage = function (evt) {
                var response = evt.data;
                if (null != response) {
                    response = JSON.parse(response);
                    // 链接的浏览器个数
                    // console.log(response.clients);
                    $('#counter').html(response.ipCounts);
                }
            };
        } else {
            // 浏览器不支持 WebSocket
            console.log('your browse not support WebSocket!');
        }
    }
</script>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="__PUBLIC_JS__/html5shiv.min.js"></script>
<script src="__PUBLIC_JS__/respond.min.js"></script>

<![endif]-->
